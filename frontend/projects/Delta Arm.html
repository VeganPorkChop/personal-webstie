<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Delta Arm Project</title>

  <style>
    :root{
      --bg:#ffffff;
      --text:#111827;
      --muted:#6b7280;
      --card:#e6ebef;
      --border:#c6cad2;
      --accent:#2563eb;

      --code-bg:#0b1020;
      --code-text:#e5e7eb;

      --max: 980px;
      --radius: 14px;
    }

    * { box-sizing: border-box; }
    body{
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color: var(--text);
      background: var(--bg);
      line-height: 1.6;
    }

    a{ color: var(--accent); text-decoration: none; }
    a:hover{ text-decoration: underline; }

    .container{
      max-width: var(--max);
      margin: 0 auto;
      padding: 28px 18px 60px;
    }

    /* Header / Hero */
    header{
      text-align: center;
      padding: 18px 0 10px;
    }
    header h1{
      margin: 14px 0 6px;
      font-size: clamp(2rem, 4vw, 2.8rem);
      letter-spacing: -0.02em;
    }
    header p{
      margin: 0 auto;
      max-width: 70ch;
      color: var(--muted);
      font-size: 1.05rem;
    }

    /* Cards */
    .card{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 18px;
      margin: 18px 0;
    }

    /* Section titles */
    h2{
      margin: 30px 0 10px;
      font-size: 1.6rem;
      letter-spacing: -0.01em;
    }
    h3{
      margin: 18px 0 8px;
      font-size: 1.2rem;
    }
    h4{
      margin: 14px 0 6px;
      font-size: 1.05rem;
      color: #111827;
    }

    .lead{
      font-size: 1.05rem;
      color: var(--muted);
      margin-top: 6px;
    }

    /* Media */
    figure{
      margin: 14px auto;
      text-align: center;
    }
    figure img{
      max-width: 100%;
      height: auto;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: #fff;
    }
    figcaption{
      margin-top: 8px;
      color: var(--muted);
      font-size: 0.95rem;
    }

    /* Lists */
    ul{
      margin: 8px 0 0 1.1rem;
      padding: 0;
    }
    li{ margin: 8px 0; }

    /* Callouts */
    .callout{
      border-left: 4px solid var(--accent);
      padding: 12px 14px;
      background: #eff6ff;
      border-radius: 12px;
      margin: 14px 0;
    }
    .callout strong{ display: inline-block; margin-bottom: 4px; }

    /* Code */
    pre{
      background: var(--code-bg);
      color: var(--code-text);
      padding: 14px 14px;
      border-radius: 12px;
      overflow-x: auto;
      border: 1px solid rgba(255,255,255,0.08);
      margin: 12px 0 0;
    }
    code{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
    .small{ font-size: 0.95rem; color: var(--muted); }

    /* Footer */
    footer{
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid var(--border);
      color: var(--muted);
      font-size: 0.95rem;
    }
  </style>
</head>

<body>
  <div class="container">

    <header>
      <figure>
        <img width="700" src="https://j.gifs.com/n5ZPN5.gif" alt="Delta arm CAD animation" />
      </figure>

      <h1>Delta Arm Project</h1>
      <p>
        We built a delta robot arm with the goal of being precise enough to play the game <em>Operation</em>.
        As a stretch goal, we aimed to make it faster and more consistent than a human.
      </p>
    </header>

    <section class="card">
      <h2>What is a Delta Arm?</h2>
      <p>
        A delta robot is a type of parallel robot with three arms connected to universal joints at the base.
        Its key feature is the use of parallelograms in the arms, which helps maintain the orientation of the end effector.
        <a href="https://en.wikipedia.org/wiki/Delta_robot" target="_blank" rel="noopener noreferrer">Source: Wikipedia</a>
      </p>

      <figure>
        <img height="220" src="https://thumbs.gfycat.com/ElasticUnderstatedErin-max-1mb.gif" alt="Delta robot example animation" />
        <figcaption class="small">A classic delta robot motion example.</figcaption>
      </figure>
    </section>

    <section>
      <h2>Build</h2>
      <p class="lead">(More like advanced copy-and-paste.)</p>

      <div class="card">
        <h3>CAD</h3>
        <figure>
          <img height="320" src="https://user-images.githubusercontent.com/113209502/218620330-2e0810e5-90f8-4238-860c-04ab3687f134.gif" alt="Delta arm CAD animation" />
        </figure>

        <div class="callout">
          <strong>CAD notes</strong>
          <p class="small" style="margin:0;">
            Pay close attention to which joints have which degrees of freedom (watch videos of delta arms moving).
            Also, the platform should not be able to rotate in any direction.
          </p>
        </div>
      </div>

      <div class="card">
        <h3>Physical Build</h3>

        <h4>The Base</h4>
        <p>
          The robot was too large to make economically with laser-cut or fully 3D-printed parts, so we used metal
          bars from a robotics kit and cut an old table to create the top plate.
        </p>

        <figure>
          <img height="230" src="https://user-images.githubusercontent.com/113209502/235755807-2ba9c510-cda3-485d-b9b5-8f193df80365.jpeg" alt="Robot base photo" />
          <figcaption>Base structure during assembly.</figcaption>
        </figure>

        <p>It was probably excessive… but the woodworking was genuinely fun.</p>

        <h4>The Arms (What I’d Do Differently)</h4>
        <p>
          I messed up on the arms repeatedly. They work, but I wouldn’t recommend copying my approach because it introduced
          avoidable issues.
        </p>

        <ul>
          <li>
            <strong>Joint interference:</strong> I didn’t check interference across all positions, so I had to redesign and reprint joints.
            <figure>
              <img height="220" src="https://user-images.githubusercontent.com/113209502/218626945-7cb06c45-8562-42d0-8417-6a1eda3e8425.jpg" alt="Joint interference photo" />
            </figure>
          </li>

          <li>
            <strong>Tape-based design:</strong> My design included tape (my teachers were not a fan), so I had to revise it.
            <figure>
              <img height="220" src="https://user-images.githubusercontent.com/113209502/218627678-261fce9e-642a-4f94-9718-0a46d1b63237.jpg" alt="Tape-based joint photo" />
            </figure>
          </li>

          <li>
            <strong>Overly flexible (“wiggly”) joint:</strong> I used a joint design that was too flexible—and later learned it wasn’t necessary.
            <figure>
              <img height="220" src="https://user-images.githubusercontent.com/113209502/218628470-b8454481-36d0-4698-8cd9-ebe9539b9f6d.png" alt="Wiggly joint design image" />
            </figure>
          </li>

          <li>
            <strong>Stepper connection fit:</strong> I didn’t design the correct fit at the stepper connection, which took way too long to fix.
            <figure>
              <img height="220" src="https://user-images.githubusercontent.com/113209502/218629013-4e0aa868-9c2f-4b7b-b0b8-40ae7e51b0fb.png" alt="Stepper connector image" />
            </figure>
          </li>
        </ul>
      </div>
    </section>

    <section class="card">
      <h2>The Main Problem</h2>
      <p>
        We did not finish the project. It wasn’t because the code failed, and only partially because the build had issues.
        The biggest problem was motor torque: the stepper motors were too weak.
      </p>
      <p>
        We could have anticipated this (someone even warned us), but it became obvious only when everything was assembled
        and we tried to move it. It moved, then the motor couldn’t hold the load and it fell.
      </p>
      <div class="callout">
        <strong>Planned fix</strong>
        <p class="small" style="margin:0;">
          Add a gearbox to the stepper to increase torque. We had the solution, but it was the last week before the due date.
        </p>
      </div>
    </section>

    <section>
      <h2>Code</h2>

      <div class="card">
        <h3>High-Level Flow</h3>
        <ol>
          <li><strong>Input mapping:</strong> Read potentiometers and map values.</li>
          <li><strong>Inverse kinematics:</strong> Use the DeltaKinematics library to compute angles (θ1, θ2, θ3) from X, Y, Z.</li>
          <li><strong>Motion output:</strong> Convert angles into step values, then move the motors by stepping the difference from the previous output.</li>
        </ol>
      </div>

      <div class="card">
        <h3>Arduino Sketch</h3>
        <p class="small">
          Note: The code below includes extra <code>Serial.print</code> statements for debugging (as used during evaluation).
        </p>

        <pre><code class="language-cpp">//I've included some serial.prints just in case you dont want to write it yourself, these are all the prints I had when evaluating the final project

#include &lt;DeltaKinematics.h&gt;//importing libraries
#include &lt;Arduino.h&gt;
#include &lt;math.h&gt;
#include &lt;Servo.h&gt;

//if you try to use both 1 and 0 pins you'll get an error, "Attpmpt 10/10". Don't do that.
#define Pot1 A3//defining pins
#define Pot2 A4
#define Pot3 A5

#define servo1 3
#define servo2 4
#define servo3 5
#define servo12 6
#define servo22 7
#define servo32 8

#define MOTOR_STEPS 200

Servo myservo1;  // create servo object to control a servo
Servo myservo2;  // create servo object to control a servo
Servo myservo3;  // create servo object to control a servo
Servo myservo12;  // create servo object to control a servo
Servo myservo22;  // create servo object to control a servo
Servo myservo32;  // create servo object to control a servo

DeltaKinematics DK(200, 300, 25, 10);//measurments of the Delta arm, making it an object. Measurment order:

int step1Rot = 0;//definings variables
int step2Rot = 0;
int step3Rot = 0;

int b1Amt = 0;
int b2Amt = 0;
int b3Amt = 0;

int a1Amt = 0;
int a2Amt = 0;
int a3Amt = 0;

void setup()
{
  Serial.begin(9600);//starting serial monitor
  myservo1.attach(servo1);  // attaches the servo on pin 9 to the servo object
  myservo2.attach(servo2);  // attaches the servo on pin 9 to the servo object
  myservo3.attach(servo3);  // attaches the servo on pin 9 to the servo object
  myservo12.attach(servo12);  // attaches the servo on pin 9 to the servo object
  myservo22.attach(servo22);  // attaches the servo on pin 9 to the servo object
  myservo32.attach(servo32);  // attaches the servo on pin 9 to the servo object
}

void loop() {
  
  XYZ();
    
  roundDegrees();  
   
  stepperMove();  
  //moves stepper
  
  delay(1000);
}
void stepperMove() {  
  Serial.println(String(b1Amt) + "," + String(a1Amt) + "---" + String(b2Amt) + "," + String(a2Amt) + "---" + String(b3Amt) + "," + String(a3Amt));
  
  int d1 = -1 * (b1Amt - a1Amt);//final math to find differnce in values and step the difference
  int d2 = -1 * (b2Amt - a2Amt);
  int d3 = -1 * (b3Amt - a3Amt);
  
  Serial.println(String(d1) + "," + String(d2) + "," + String(d3));
  int o1 = map(d1, 0, 180, 180, 0);
  int o2 = map(d2, 0, 180, 180, 0);
  int o3 = map(d3, 0, 180, 180, 0);
  myservo1.write(d1);//stepping motors
  myservo2.write(d2);
  myservo3.write(d3);
  myservo12.write(o1);//stepping motors
  myservo22.write(o2);
  myservo32.write(o3);
}
void XYZ() {
  
  int p1 = analogRead(Pot1);//input from potentiometers
  int p2 = analogRead(Pot2);
  int p3 = analogRead(Pot3);
  
  DK.x = map(p1, 0, 1024, -150, 150);//mapping inputs
  DK.y = map(p2, 0, 1024, -150, 150);
  DK.z = map(p3, 0, 1024, -400, -100);
  
  DK.inverse();//This function is part of the DK library, its whole job is to turn X, Y, and Z into THETA1 THETA2 and THETA3
  
  Serial.println(String(p1) + "," + String(p2) + "," + String(p3));
  Serial.println(String(DK.x) + "," + String(DK.y) + "," + String(DK.z));
  Serial.println(String(DK.a) + "," + String(DK.b) + "," + String(DK.c));

}
//idea for before and After amts comes from this exe code
void roundDegrees() {//this whole block of code is here because otherwise the motors dont know what to do with a valuse thats not on their list of allowed values(Whole numbers from 1 to MOTOR_STEPS)
                     //therefore we multiply the variable by 200 and truncate its value. this makes it devisable by 200, then we divide it by 200.
  b1Amt = step1Rot;
  b2Amt = step2Rot;
  b3Amt = step3Rot;
  
  step1Rot = int((DK.a));
  step2Rot = int((DK.b));
  step3Rot = int((DK.c));

  a1Amt = step1Rot;
  a2Amt = step2Rot;
  a3Amt = step3Rot;
}
</code></pre>
      </div>
    </section>

    <section class="card">
      <h2>Delta Arm Kinematics</h2>
      <p>
        Delta arms use kinematics to determine how much each arm must rotate to place the end effector at a target position.
        I originally expected to derive the math myself, but instead used a library that implements the calculations directly:
        <a href="https://github.com/tinkersprojects/Delta-Kinematics-Library" target="_blank" rel="noopener noreferrer">Delta Kinematics Library</a>.
      </p>
    </section>

    <section class="card">
      <h2>Wiring</h2>
      <p>
        Our wiring included three stepper motors (NEMA 17), three stepper motor drivers (DRV8833), three potentiometers,
        a switch, a button, and optionally an LED.
      </p>
      <ul>
        <li><strong>LED:</strong> Use a 220&nbsp;Ω resistor from the short leg (cathode) to ground; connect the long leg (anode) to 3.3V or 5V.</li>
        <li><strong>Potentiometers:</strong> Share 5V and GND rails to save pins and reduce connection issues.</li>
        <li><strong>Power switch:</strong> Connect from a 9V battery to the <code>VM</code> pin on the Arduino.</li>
        <li><strong>Stepper wiring:</strong> The steppers used four wire colors (red, grey, green, yellow). Use your reference diagram/image for correct pairing.</li>
      </ul>
    </section>

    <section class="card">
      <h2>Problems to Prevent</h2>

      <h3>Using pins 0 and 1 on the Arduino Uno</h3>
      <p>
        Pins 0 and 1 are used for serial communication over USB. Using them for other components can interfere with serial
        output and even prevent uploads to the board.
      </p>

      <h3>H-Bridge shorting detection</h3>
      <p>
        I burned 4–5 H-bridges during this project. Signs of failure included unusual heat and visible damage (like small
        extruding dots on the bottom black chip).
      </p>

      <h3>Converting variables (strings and integers)</h3>
      <p>
        Printing values often requires converting to strings, and motors typically require whole-number step counts.
        For example:
      </p>
      <pre><code class="language-cpp">Serial.println(String(p1) + "," + String(p2) + "," + String(p3));
step1Rot = int((DK.a));</code></pre>

      <h3>Arm length vs. stepper strength</h3>
      <p>
        If the arms are long and the payload is heavy, torque requirements increase quickly. This was the main reason our
        build couldn’t reliably hold position.
      </p>
    </section>

    <section class="card">
      <h2>Micro-Stepping (What Went Wrong)</h2>
      <p>
        If you plan to try micro-stepping, here are the three recommendations that would have saved me the most time:
      </p>
      <ul>
        <li><a href="https://github.com/uivc/A4982StepperDriver" target="_blank" rel="noopener noreferrer">Use this library (A4982 Stepper Driver)</a></li>
        <li><a href="https://www.allegromicro.com/-/media/files/datasheets/a4982-datasheet.pdf" target="_blank" rel="noopener noreferrer">Use A4982 drivers (datasheet)</a></li>
        <li><strong>Do not short them</strong> (double-check power rails and motor wiring)</li>
      </ul>

      <p>
        I had access to four A4982 drivers. One disappeared “in a ball of smoke,” and the others taught me lessons about
        wiring, code pin definitions (mixing <code>ENBL</code> and <code>STEP</code>), and not reversing power rails on a breadboard
        (12V and GND do not mix).
      </p>
    </section>

    <footer>
      <strong>Helpful source:</strong>
      <span> </span>
      <a href="https://www.marginallyclever.com/other/samples/fk-ik-test.html" target="_blank" rel="noopener noreferrer">
        FK/IK Test Tool
      </a>
    </footer>

  </div>
</body>
</html>
